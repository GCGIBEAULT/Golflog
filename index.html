<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Golf Log — Mobile Score Tracker</title>
  <meta name="description" content="Golf Log app for tracking rounds, scores, and conditions." />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main id="app" class="container">
    <h1>Golf Log</h1>

    <form id="roundForm" class="single-column" onsubmit="saveRound(event)">
      <label for="date">Date</label>
      <input id="date" name="date" type="text" placeholder="mm/dd/yyyy" inputmode="numeric" />

      <label for="course">Course Name</label>
      <input id="course" name="course" type="text" placeholder="Course Name" />

      <label for="score">Score</label>
      <input id="score" name="score" type="number" inputmode="numeric" placeholder="Score" />

      <label for="slope">Slope</label>
      <input id="slope" name="slope" type="number" inputmode="numeric" placeholder="Slope" />

      <label for="handicap">Handicap</label>
      <input id="handicap" name="handicap" type="number" inputmode="numeric" placeholder="Handicap" />

      <label for="notes">Notes</label>
      <textarea id="notes" name="notes" placeholder="Add any comments or conditions"></textarea>

      <button id="saveBtn" type="submit">Save Round</button>
    </form>

    <section id="savedRounds" aria-live="polite">
      <h2 class="visually-hidden">Saved Rounds</h2>
      <div id="roundList"></div>
    </section>
  </main>

  <script>
    // Minimal, self-contained JS — safe to replace current script
    function renderRounds() {
      const list = JSON.parse(localStorage.getItem('golfRounds') || '[]');
      const container = document.getElementById('roundList');
      container.innerHTML = '';
      if (!list.length) {
        container.textContent = 'No saved rounds';
        return;
      }
      list.forEach((r, idx) => {
        const el = document.createElement('div');
        el.className = 'log-line';
        el.innerHTML = `<strong>${r.date}</strong> — ${escapeHtml(r.course)} — ${r.score} — ${r.slope} — ${r.handicap}<div class="note">${escapeHtml(r.notes)}</div><button class="del" data-i="${idx}">Delete</button>`;
        container.appendChild(el);
      });
    }

    function saveRound(e) {
      if (e) e.preventDefault();
      const date = document.getElementById('date').value.trim();
      const course = document.getElementById('course').value.trim();
      const score = document.getElementById('score').value.trim();
      const slope = document.getElementById('slope').value.trim();
      const handicap = document.getElementById('handicap').value.trim();
      const notes = document.getElementById('notes').value.trim();

      if (!date && !course && !score) return;

      const list = JSON.parse(localStorage.getItem('golfRounds') || '[]');
      list.unshift({ date, course, score, slope, handicap, notes });
      localStorage.setItem('golfRounds', JSON.stringify(list));
      renderRounds();
      document.getElementById('roundForm').reset();
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, function (m) {
        return ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[m];
      });
    }

    document.addEventListener('click', function (ev) {
      const d = ev.target.closest('button.del');
      if (!d) return;
      const idx = Number(d.getAttribute('data-i'));
      const list = JSON.parse(localStorage.getItem('golfRounds') || '[]');
      list.splice(idx, 1);
      localStorage.setItem('golfRounds', JSON.stringify(list));
      renderRounds();
    });

    // initial render
    renderRounds();
  </script>
</body>
</html>
